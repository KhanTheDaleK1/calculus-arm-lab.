<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalculusArm Lab v4.0</title>
    <link rel="stylesheet" href="css/style.css?v=1765825158">
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="js/stk500.js?v=1765825158"></script>
</head>
<body>
    <div class="app-container">
        <header>
            <h1>CalculusArm <span class="highlight">Dynamics Lab</span></h1>
            <div class="connection-status">
                <select id="serial-port-list" class="port-dropdown"><option value="prompt">üîå Add New Device...</option></select>
                <button id="btn-open-port" class="btn primary">Connect</button>
                <button id="btn-flash" class="btn action">‚ö° Flash Firmware</button>
                <span id="status-indicator" class="status disconnected">Disconnected</span>
            </div>
        </header>

        <main class="grid-layout">
            <section class="panel control-panel">
                <h2>1. Configuration Space ($\theta$)</h2>
                <div class="slider-group">
                    <label>Base ($\theta_1$) <span id="val-theta1">90¬∞</span></label>
                    <input type="range" id="slider-theta1" min="0" max="180" value="90">
                </div>
                <div class="slider-group">
                    <label>Shoulder ($\theta_2$) <span id="val-theta2">90¬∞</span></label>
                    <input type="range" id="slider-theta2" min="0" max="180" value="90">
                </div>
                <div class="slider-group">
                    <label>Elbow ($\theta_3$) <span id="val-theta3">90¬∞</span></label>
                    <input type="range" id="slider-theta3" min="0" max="180" value="90">
                </div>
                
                <div class="help-box" style="margin-top:20px; font-size: 0.8rem; color: #888;">
                    <p><strong>Laptop not connecting?</strong></p>
                    <p>You likely need drivers for the Arduino clone (CH340).</p>
                    <a href="https://learn.sparkfun.com/tutorials/how-to-install-ch340-drivers/all" target="_blank" style="color:#00ff9d;">Download CH340 Drivers</a>
                </div>
            </section>

            <section class="panel vis-panel">
                <h2>2. Task Space (, y, z$)</h2>
                <div id="plot-container" style="width:100%; height:400px; background:#121212;"></div>
                <div class="plot-controls">
                    <button id="btn-record" class="btn action">üî¥ Record</button>
                    <button id="btn-clear" class="btn action">üóëÔ∏è Clear</button>
                </div>
            </section>

            <section class="panel math-panel">
                <h2>3. Analysis</h2>
                <div class="math-module">
                    <h3>Forward Kinematics</h3>
                    <div class="readout-grid">
                        <div>x: <span id="out-x">0.00</span></div>
                        <div>y: <span id="out-y">0.00</span></div>
                        <div>z: <span id="out-z">0.00</span></div>
                    </div>
                </div>
                <div class="math-module">
                    <h3>Velocity ($\|\mathbf{v}\|$)</h3>
                    <div id="math-vel" class="big-number">0.00</div>
                </div>
                <div class="math-module">
                    <h3>Regression Model</h3>
                    <div id="func-x" style="color:#ff4757;">x(t) ‚âà --</div>
                    <div id="func-y" style="color:#2ed573;">y(t) ‚âà --</div>
                    <div id="func-z" style="color:#1e90ff;">z(t) ‚âà --</div>
                </div>
            </section>
        </main>

        <section class="system-log" style="background:#000; color:#0f0; font-family:monospace; padding:10px; height:100px; overflow-y:scroll; border-top:1px solid #333;">
            <div id="log-output">System Ready. Waiting for connection...</div>
        </section>
    </div>
    
    <script src="js/app.js?v=1765825158"></script>
</body>
</html>
